apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: xquare
spec:
  generator:
    git:
      repoURL: https://github.com/rlaisqls/xquare-gitops-repo-staging.git
      revision: main
      directories:
        - path: charts/apps
          jsonPointers:
            - /prod.values.yaml
            - /stag.values.yaml
            - /user.values.yaml
  template:
    spec:
      project: xquare
      source:
        repoURL: https://github.com/rlaisqls/xquare-gitops-repo-staging.git
        targetRevision: main
        path: charts/apps
        helm:
          valueFiles:
            - {{ path }}#/prod.values.yaml
            - {{ path }}#/stag.values.yaml
            - {{ path }}#/user.values.yaml
      destination:
        server: https://kubernetes.default.svc
        namespace: xquare
      syncPolicy:
        automated: {}