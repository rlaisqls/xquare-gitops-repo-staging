apiVersion: projectcontour.io/v1
kind: HTTPProxy
metadata:
  name: {{.Values.app.name}}
spec:
  virtualhost:
    fqdn: stag-api.xquare.app
    tls:
      secretName: {{.Values.app.type}}-{{.Values.app.env}}-cert
    # authorization:
    #   extensionRef:
    #     name: authorization
    #     namespace: authorization

  routes:
  - conditions:
    - prefix: {{.Values.ingress.prefix}}
    services:
      - name: {{.Values.app.name}}
        port: 80