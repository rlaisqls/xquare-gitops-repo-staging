apiVersion: projectcontour.io/v1
kind: HTTPProxy
metadata:
  name: {{.Values.app.name}}
spec:
  ingressClassName: contour
  virtualhost:
    fqdn: stag-api.xquare.app
    tls:
      secretName: be-stag-cert
    authorization:
      extensionRef:
        name: contour-auth
        namespace: contour-auth    
  routes:
    - conditions:
      - prefix: /meal
      services:
        - name: {{.Values.app.name}}
          port: 80
